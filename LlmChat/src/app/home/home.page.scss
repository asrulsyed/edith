// Modern Dark Color Palette
$background-dark: #0a0a0a;
$background-light: #141414;
$primary-color: #5c5c5c; // Deep charcoal grey
$secondary-color: #a3004c; // Warm amber for contrast and pop
$accent-color: #767676; // Neutral grey for accents
$text-color: #f0f0f0;
$muted-text: #a0a0a0;
$card-background: rgba(255, 255, 255, 0.05);


// Typography
$font-family: 'Inter', sans-serif;

// Mixins
@mixin glass-effect {
  background: rgba(255, 255, 255, 0.05);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

@mixin floating {
  box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
}

@mixin soft-transition {
  transition: all 0.3s ease;
}

// Global Styles
body {
  font-family: $font-family;
  color: $text-color;
  background-color: $background-dark;
  line-height: 1.6;
}

ion-content {
  --ion-background-color: #{$background-dark};
  --padding-bottom: 80px; // Adjust for fixed bottom bar
}

// Shared Component Styles
%rounded-component {
  border-radius: 16px;
  @include glass-effect;
  @include floating;
}

// Header Styles
ion-header {
  ion-toolbar {
    --background: transparent;
    --border-width: 0;
    @include glass-effect; // Add blur to the header

    &::after {
      display: none;
    }

    ion-title {
      font-size: 1.2rem;
      font-weight: 600;
      text-align: center; // Center the title
      width: 100%;       // Ensure title takes full width
    }

    ion-buttons {
      ion-button {
        --color: #{$accent-color};
        @include soft-transition;
        &:hover {
          --background: rgba($accent-color, 0.1);
        }
      }
      // Add styles for back button to match other buttons
      ion-back-button {
        --color: #{$accent-color};
        @include soft-transition;
        &:hover {
          --background: rgba($accent-color, 0.1);
        }
      }
    }
  }

  &.floating-header { // Floating header specific styles
    ion-toolbar {
      // margin: 16px;
      margin-top: 5px;
      border-radius: 16px; // Consistent rounded corners
    }
  }
}


// Message List Styles
ion-list {
  background: transparent;
  padding: 16px;
}

ion-item {
  --background: transparent;
  --padding-start: 0;
  --padding-end: 0;
  --inner-padding-end: 0;
  margin-bottom: 16px;

  ion-label {
    @extend %rounded-component;
    padding: 16px;

    &.user-message {
      background: linear-gradient(135deg, rgba($primary-color, 0.1), rgba($primary-color, 0.2));
      border-left: 4px solid $primary-color;

      .message-sender {
        color: $primary-color;
        font-weight: 600;
      }
    }

    &.assistant-message {
      background: linear-gradient(135deg, rgba($secondary-color, 0.1), rgba($secondary-color, 0.2));
      border-left: 4px solid $secondary-color;

      .message-sender {
        color: $secondary-color;
        font-weight: 600;
      }
    }
    &.writing-message { // Styling for "Writing..." message
      background: linear-gradient(135deg, rgba($secondary-color, 0.1), rgba($secondary-color, 0.2));
      border-left: 4px solid $secondary-color;

      .message-sender {
        color: $secondary-color;
        font-weight: 600;
      }
    }

    .message-content {
      margin-top: 8px;
      white-space: pre-wrap;
    }
  }
}

// Bottom Bar Styles
.bottom-bar {
  position: fixed;
  bottom: 16px;
  left: 16px;
  right: 16px;
  @extend %rounded-component;
  padding: 8px;
  z-index: 1000;

  ion-toolbar {
    --background: transparent;
    --min-height: 50px;
    display: flex;
    align-items: center;

    ion-input {
      --background: #{rgba($background-light, 0.5)};
      --color: #{$text-color};
      --placeholder-color: #{$muted-text};
      --placeholder-opacity: 0.8;
      --padding-start: 16px;
      --padding-end: 16px;
      border-radius: 25px; // Consistent rounded corners 
      margin-right: 10px;
      height: 50px;
      flex-grow: 1;
      font-size: 16px;
      @include soft-transition;

      &:focus {
        --background: #{rgba($primary-color, 0.1)};
      }
    }

    .send-button {
      --background: #{$accent-color};
      --color: #{$text-color};
      --border-radius: 25px;
      --box-shadow: none;
      min-width: 50px;
      height: 50px;
      margin: 0; 
      padding-left: 5px; // Adjust padding as needed for even spacing
      padding-right: 5px;
      @include soft-transition;

      &:hover {
        --background: #{darken($accent-color, 10%)};
      }
    }
    ion-input {
      --border-radius: 25px;
      --padding-start: 15px;
      --padding-end: 15px;
  }}
}


// FAB Styles
ion-fab {
  margin-bottom: 96px; // Adjusted for fixed bottom bar
}

ion-fab-button {
  --background: #{$secondary-color};
  --color: #{$text-color};
  @include floating;
  @include soft-transition;

  &:hover {
    --background: #{darken($secondary-color, 10%)};
  }
}

// Modal Styles 
.session-sidebar,
.create-session-sidebar {
  --background: #{rgba($background-light, 0.8)};
  --width: 90%;
  --max-width: 400px;
  --border-radius: 20px 0 0 20px;
  @include glass-effect;

  ion-header ion-toolbar {
    --background: transparent;
    ion-title {
      font-weight: 600;
      text-align: center; // Center modal titles
      width: 100%;
    }
    ion-buttons {
      ion-button {
        --color: #{$accent-color};
        @include soft-transition;
        &:hover {
          --background: rgba($accent-color, 0.1);
        }
      }
    }
  }

  ion-content {
    --background: transparent;
  }

  ion-item {
    --background: #{$card-background};
    --border-color: transparent;
    border-radius: 12px;
    margin-bottom: 8px;
    @include soft-transition;

    &:hover {
      --background: #{rgba(255, 255, 255, 0.1)};
    }
    
    ion-label { // Style for floating labels in modals
      color: $text-color;
      font-weight: 500;
    }

    ion-input { // Style for input fields in modals
      --color: $text-color;
      --placeholder-color: $muted-text;
      --background: rgba($background-light, 0.3);
      border-radius: 8px;
      margin-top: 8px;
    }
  }

  ion-button[expand="block"] { // Style for "Create" button in modal
    --background: #{$accent-color};
    --color: #{$text-color};
    --border-radius: 16px;
    margin: 24px 16px; 
    height: 54px;
    font-size: 18px;
    font-weight: 600;
    letter-spacing: 0.5px;
    text-transform: none;
    @include floating;
    @include soft-transition;

    &:hover {
      --background: #{darken($accent-color, 10%)};
    }
  }
}


// Settings Page Styles
ion-content[fullscreen] {
  --padding-start: 16px;
  --padding-end: 16px;

  ion-list {
    background: transparent;
    padding: 0; // Remove default padding 

    ion-item {
      @extend %rounded-component;
      --background: #{$card-background};
      --color: #{$text-color};
      margin-bottom: 16px;

      ion-label {
        color: $text-color;
        font-weight: 500;
      }

      ion-input,
      ion-select,
      ion-textarea {
        --color: #{$text-color};
        --placeholder-color: #{$muted-text};
        --background: #{rgba($background-light, 0.3)};
        border-radius: 8px;
        margin-top: 8px;
      }

      ion-select::part(icon) { 
        color: $accent-color; 
      }

      ion-select::part(placeholder) {
        color: $muted-text; 
      }
    }
  }

  ion-button[expand="block"] {
    --background: #{$accent-color};
    --color: #{$text-color};
    --border-radius: 16px;
    margin: 24px 0; // Adjust margin 
    height: 54px;
    font-size: 18px;
    font-weight: 600;
    letter-spacing: 0.5px;
    text-transform: none;
    @include floating; 
    @include soft-transition;

    &:hover {
      --background: #{darken($accent-color, 10%)};
    }
  }
}

// Responsive Design 
@media (max-width: 768px) {
  .session-sidebar,
  .create-session-sidebar {
    --width: 100%;
    --border-radius: 20px 20px 0 0; 
  }
}


// Animations
@keyframes fadeInUp {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

ion-item {
  animation: fadeInUp 0.3s ease-out;
}